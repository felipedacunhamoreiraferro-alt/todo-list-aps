<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Página de Cadastro Completo</title>
    <style>
        :root{
            --bg:#f5f7fb; --card:#fff; --accent:#0066cc; --muted:#6b7280; --danger:#e03a3a;
        }
        body{
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(180deg,#eef4ff 0%,var(--bg) 100%);
            color:#111827;
            margin:0;
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:32px;
        }

        .container{
            width:100%;
            max-width:980px;
            background:var(--card);
            border-radius:12px;
            box-shadow:0 6px 30px rgba(10,20,40,0.08);
            padding:28px;
            display:grid;
            grid-template-columns:1fr 420px;
            gap:24px;
        }

        header h1{margin:0 0 6px 0;font-size:20px;}
        header p{margin:0;color:var(--muted);font-size:13px}

        form{display:grid;gap:14px;}
        .row{display:flex;gap:12px;}
        .col{flex:1;display:flex;flex-direction:column;gap:6px}
        label{font-size:13px;color:#0f1724}
        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="tel"],
        input[type="date"],
        select,
        textarea{
            width:100%;
            padding:10px 12px;
            border:1px solid #e6e9ef;
            border-radius:8px;
            background:#fff;
            font-size:14px;
            outline:none;
            transition:box-shadow .12s,border-color .12s;
        }
        input:focus, select:focus, textarea:focus{box-shadow:0 0 0 4px rgba(0,102,204,0.06);border-color:var(--accent)}

        .small{font-size:12px;color:var(--muted)}
        .half{width:50%}
        .actions{display:flex;gap:10px;align-items:center;margin-top:8px}
        button{
            background:var(--accent);
            color:#fff;
            border:0;padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer;
        }
        button.secondary{background:#fff;border:1px solid #e6e9ef;color:#111827}

        .aside{
            padding:8px 12px;
            border-left:1px dashed #eef2ff;
            display:flex;
            flex-direction:column;
            gap:12px;
        }
        .avatar-preview{
            display:flex;flex-direction:column;align-items:center;gap:10px;
            padding:12px;border-radius:8px;background:linear-gradient(180deg,#fbfdff,#fff);
            border:1px solid #eef2ff;
        }
        .avatar-preview img{width:120px;height:120px;border-radius:999px;object-fit:cover;border:4px solid #fff;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
        progress{width:100%;height:10px;border-radius:6px;overflow:hidden}
        .error{color:var(--danger);font-size:13px}
        .success{color:green;font-size:13px}
        .terms{display:flex;gap:8px;align-items:center;font-size:13px}
        .note{font-size:12px;color:var(--muted)}
        @media(max-width:900px){
            .container{grid-template-columns:1fr; padding:18px}
            .aside{border-left:none;border-top:1px dashed #eef2ff;padding-top:14px}
        }
    </style>
</head>
<body>
    <div class="container" role="main">
        <div>
            <header>
                <h1>Cadastro de Usuário</h1>
                <p>Preencha seus dados para criar uma conta. Campos com * são obrigatórios.</p>
            </header>

            <form id="registerForm" novalidate>
                <div class="row">
                    <div class="col">
                        <label for="nome">Nome completo *</label>
                        <input id="nome" name="nome" type="text" required minlength="3" placeholder="Seu nome completo" />
                        <div class="small" id="nomeHelp">Digite seu nome e sobrenome.</div>
                    </div>
                    <div class="col">
                        <label for="apelido">Apelido</label>
                        <input id="apelido" name="apelido" type="text" placeholder="Como prefere ser chamado" />
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="email">E-mail *</label>
                        <input id="email" name="email" type="email" required placeholder="seu@exemplo.com" />
                        <div class="small">Será usado para recuperar a conta e notificações.</div>
                    </div>
                    <div class="col">
                        <label for="cpf">CPF *</label>
                        <input id="cpf" name="cpf" type="text" required placeholder="000.000.000-00" maxlength="14" inputmode="numeric" />
                        <div class="small">Digite apenas números; será formatado automaticamente.</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="telefone">Telefone</label>
                        <input id="telefone" name="telefone" type="tel" placeholder="(11) 99999-9999" maxlength="15" inputmode="tel" />
                    </div>
                    <div class="col">
                        <label for="dataNasc">Data de nascimento</label>
                        <input id="dataNasc" name="dataNasc" type="date" max="" />
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label for="senha">Senha *</label>
                        <input id="senha" name="senha" type="password" required minlength="8" placeholder="Mínimo 8 caracteres" aria-describedby="senhaHelp" />
                        <div id="senhaHelp" class="small">Use letras, números e ao menos um caractere especial.</div>
                    </div>
                    <div class="col">
                        <label for="confirmSenha">Confirmar senha *</label>
                        <input id="confirmSenha" name="confirmSenha" type="password" required placeholder="Repita a senha" />
                        <div id="pwMatch" class="small"></div>
                    </div>
                </div>

                <div>
                    <label for="genero">Gênero</label>
                    <select id="genero" name="genero">
                        <option value="">Prefiro não informar</option>
                        <option>Feminino</option>
                        <option>Masculino</option>
                        <option>Não-binário</option>
                        <option>Outro</option>
                    </select>
                </div>

                <div>
                    <label for="endereco">Endereço</label>
                    <textarea id="endereco" name="endereco" rows="2" placeholder="Rua, número, complemento, bairro, cidade - Estado"></textarea>
                </div>

                <div class="row">
                    <div style="flex:1">
                        <label for="ocupacao">Ocupação</label>
                        <input id="ocupacao" name="ocupacao" type="text" placeholder="Ex: Desenvolvedor, Estudante..." />
                    </div>
                    <div style="width:150px">
                        <label for="tipoConta">Tipo de conta</label>
                        <select id="tipoConta" name="tipoConta">
                            <option value="cliente">Cliente</option>
                            <option value="profissional">Profissional</option>
                            <option value="empresa">Empresa</option>
                        </select>
                    </div>
                </div>

                <div class="terms">
                    <input id="termos" name="termos" type="checkbox" required />
                    <label for="termos">Aceito os <a href="#" target="_blank">termos de uso</a> e a <a href="#" target="_blank">política de privacidade</a> *</label>
                </div>

                <div class="actions">
                    <button type="submit" id="submitBtn">Criar conta</button>
                    <button type="button" class="secondary" id="limparBtn">Limpar</button>
                    <div class="note" id="formMsg" aria-live="polite"></div>
                </div>
            </form>
        </div>

        <aside class="aside" aria-label="Informações do perfil">
            <div class="avatar-preview">
                <img id="previewImg" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'120'%20height%3D'120'%20xmlns%3D'http%3A//www.w3.org/2000/svg'%3E%3Crect%20width%3D'100%25'%20height%3D'100%25'%20fill%3D'%23eef2ff'/%3E%3Ctext%20x%3D'50%25'%20y%3D'50%25'%20dominant-baseline%3D'middle'%20text-anchor%3D'middle'%20fill%3D'%23606f7b'%20font-size%3D'20'%3EFoto%3C/text%3E%3C/svg%3E" alt="Pré-visualização do avatar" />
                <div>
                    <label for="foto" style="display:inline-block;padding:8px 10px;background:#fff;border:1px dashed #dbeafe;border-radius:8px;cursor:pointer">Enviar foto</label>
                    <input id="foto" name="foto" type="file" accept="image/*" style="display:none" />
                </div>
                <div class="small">Formato PNG/JPG até 3MB. Recomendado 400x400px.</div>
            </div>

            <div>
                <label>Força da senha</label>
                <progress id="strength" value="0" max="100"></progress>
                <div id="strengthText" class="small">Use ao menos 8 caracteres</div>
            </div>

            <div>
                <label>Status</label>
                <div id="statusBox" class="small">Pronto para preencher o formulário.</div>
            </div>

        </aside>
    </div>

    <script>
        // Helpers: máscaras simples e validações
        const cpfInput = document.getElementById('cpf');
        const telInput = document.getElementById('telefone');
        const senha = document.getElementById('senha');
        const confirmSenha = document.getElementById('confirmSenha');
        const strength = document.getElementById('strength');
        const strengthText = document.getElementById('strengthText');
        const pwMatch = document.getElementById('pwMatch');
        const foto = document.getElementById('foto');
        const previewImg = document.getElementById('previewImg');
        const form = document.getElementById('registerForm');
        const submitBtn = document.getElementById('submitBtn');
        const limparBtn = document.getElementById('limparBtn');
        const formMsg = document.getElementById('formMsg');
        const dataNasc = document.getElementById('dataNasc');

        // set max date to today (user must be born before today)
        dataNasc.max = new Date().toISOString().split('T')[0];

        // Mask for CPF: 000.000.000-00
        cpfInput.addEventListener('input', e => {
            let v = e.target.value.replace(/\D/g,'').slice(0,11);
            v = v.replace(/^(\d{3})(\d)/, '$1.$2');
            v = v.replace(/^(\d{3})\.(\d{3})(\d)/, '$1.$2.$3');
            v = v.replace(/(\d{3})\.(\d{3})\.(\d{3})(\d)/, '$1.$2.$3-$4');
            e.target.value = v;
        });

        // Simple phone mask (BR): (00) 00000-0000 or (00) 0000-0000
        telInput.addEventListener('input', e => {
            let v = e.target.value.replace(/\D/g,'').slice(0,11);
            if(v.length > 10){
                v = v.replace(/^(\d{2})(\d{5})(\d{4}).*/,'($1) $2-$3');
            } else {
                v = v.replace(/^(\d{2})(\d{4})(\d{0,4}).*/,'($1) $2-$3');
            }
            e.target.value = v;
        });

        // Password strength estimator (simple)
        function estimateStrength(value){
            let score = 0;
            if(value.length >= 8) score += 30;
            if(/[a-z]/.test(value) && /[A-Z]/.test(value)) score += 20;
            if(/\d/.test(value)) score += 20;
            if(/[^A-Za-z0-9]/.test(value)) score += 30;
            return Math.min(100, score);
        }

        senha.addEventListener('input', () => {
            const val = senha.value;
            const s = estimateStrength(val);
            strength.value = s;
            if(s < 40) strengthText.textContent = 'Senha fraca';
            else if(s < 70) strengthText.textContent = 'Senha média';
            else strengthText.textContent = 'Senha forte';
            checkPwMatch();
        });

        confirmSenha.addEventListener('input', checkPwMatch);
        function checkPwMatch(){
            if(!confirmSenha.value && !senha.value){ pwMatch.textContent=''; return; }
            if(senha.value === confirmSenha.value){
                pwMatch.textContent = 'Senhas conferem';
                pwMatch.className = 'success';
            } else {
                pwMatch.textContent = 'Senhas não conferem';
                pwMatch.className = 'error';
            }
        }

        // Preview image
        foto.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if(!file) return;
            if(!file.type.startsWith('image/')) { alert('Selecione uma imagem.'); e.target.value=''; return; }
            if(file.size > 3 * 1024 * 1024){ alert('Arquivo muito grande. Máx 3MB.'); e.target.value=''; return; }
            const reader = new FileReader();
            reader.onload = () => previewImg.src = reader.result;
            reader.readAsDataURL(file);
        });

        // Form submit: client-side validation reinforcement
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            formMsg.textContent = '';
            // use constraint validation API
            if(!form.checkValidity()){
                form.reportValidity();
                formMsg.textContent = 'Por favor corrija os campos destacados.';
                formMsg.className = 'error';
                return;
            }
            // check password match
            if(senha.value !== confirmSenha.value){
                pwMatch.textContent = 'Senhas não conferem';
                pwMatch.className = 'error';
                formMsg.textContent = 'Senhas não conferem.';
                formMsg.className = 'error';
                confirmSenha.focus();
                return;
            }
            // optional: basic CPF validity (length check numerics)
            const rawCpf = cpfInput.value.replace(/\D/g,'');
            if(rawCpf.length !== 11){
                formMsg.textContent = 'CPF inválido.';
                formMsg.className = 'error';
                cpfInput.focus();
                return;
            }

            // simulate success (here you'd send to servidor via fetch/ajax)
            submitBtn.disabled = true;
            submitBtn.textContent = 'Enviando...';
            setTimeout(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Criar conta';
                formMsg.textContent = 'Cadastro realizado com sucesso!';
                formMsg.className = 'success';
                form.reset();
                strength.value = 0;
                strengthText.textContent = 'Use ao menos 8 caracteres';
                previewImg.src = 'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%27120%27%20height%3D%27120%27%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%3E%3Crect%20width%3D%27100%25%27%20height%3D%27100%25%27%20fill%3D%27%23eef2ff%27/%3E%3Ctext%20x%3D%2750%25%27%20y%3D%2750%25%27%20dominant-baseline%3D%27middle%27%20text-anchor%3D%27middle%27%20fill%3D%27%23606f7b%27%20font-size%3D%2720%27%3EFoto%3C/text%3E%3C/svg%3E';
            }, 900);
        });

        limparBtn.addEventListener('click', () => {
            form.reset();
            strength.value = 0;
            strengthText.textContent = 'Use ao menos 8 caracteres';
            pwMatch.textContent = '';
            formMsg.textContent = '';
            previewImg.src = 'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%27120%27%20height%3D%27120%27%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%3E%3Crect%20width%3D%27100%25%27%20height%3D%27100%25%27%20fill%3D%27%23eef2ff%27/%3E%3Ctext%20x%3D%2750%25%27%20y%3D%2750%25%27%20dominant-baseline%3D%27middle%27%20text-anchor%3D%27middle%27%20fill%3D%27%23606f7b%27%20font-size%3D%2720%27%3EFoto%3C/text%3E%3C/svg%3E';
        });

        // clicking the fake label triggers file input
        document.querySelector('label[for="foto"]').addEventListener('click', () => foto.click());

    </script>
</body>
</html></div>